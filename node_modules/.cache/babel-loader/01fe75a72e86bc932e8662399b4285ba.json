{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Nourou\\\\Documents\\\\Developpement WEB\\\\CamSecurite-django-react\\\\frontend\\\\src\\\\pages\\\\components\\\\ProduitAchat.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport Avis from './Avis';\nimport $ from 'jquery';\nimport expedition24 from '../assets/img/expedition24.png';\nimport france from '../assets/img/france.png';\nimport paiement from '../assets/img/paiement.jpg';\nimport sav from '../assets/img/sav.png';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Produitachat = props => {\n  _s();\n\n  const [produitimages, setProduitimages] = useState([\"\"]);\n  const [u, setU] = useState(props.user);\n  console.log('u u 168161', u);\n\n  const getCSRF = async () => {\n    var url2 = \"http://localhost:8000/csrf/\";\n    let r = '';\n    await fetch(url2, {\n      credentials: 'include'\n    }).then(response => {\n      if (response.ok) {\n        console.log(\"fetchCSRF\");\n        r = response.json();\n      } else {\n        console.log(response, 'Mauvaise réponse du réseau');\n      }\n    }).catch(function (error) {\n      console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\n    });\n    return r;\n  };\n\n  console.log('props ppp produit', props);\n\n  const acheter = e => {\n    e.preventDefault();\n    let btn = e.target;\n    btn.innerHTML = \"\";\n    btn.classList.add(\"btnLoading\");\n    var l = document.createElement('div');\n    l.setAttribute(\"class\", \"loader1\");\n    var b = document.createElement('div');\n    b.setAttribute(\"class\", \"box\");\n    b.appendChild(l);\n    console.log(b);\n    btn.appendChild(b);\n    btn.disabled = true;\n    setTimeout(() => {\n      btn.innerHTML = \"\";\n      btn.classList.add(\"btnOK\");\n    }, 4000);\n    let inputsForm = new Object();\n    inputsForm['quantite'] = '1';\n    inputsForm['iduser'] = String(u.id);\n    inputsForm['idproduit'] = String(props.id);\n    inputsForm = JSON.stringify(inputsForm);\n    console.log('ajoutpanier', inputsForm);\n    var url2 = \"http://localhost:8000/ajouter_produit/\";\n    fetch(url2, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: inputsForm\n    }).then(response => {\n      if (response.ok) {\n        console.log(\"fetchAddProduit\");\n        return response.json();\n      } else {\n        console.log(response, 'Mauvaise réponse du réseau pas d ajout');\n      }\n    }).then(data => {\n      console.log(data);\n    }).catch(function (error) {\n      console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\n    });\n    setTimeout(() => {\n      btn.innerHTML = \"\";\n      btn.classList.add(\"btnOK\");\n    }, 2000);\n  };\n\n  useEffect(() => {\n    let t = async () => {\n      var url = \"http://localhost:8000/current_user/?format=json\";\n      let r = await getCSRF();\n      const csrftoken = r.csrfToken;\n      let data = await fetch(url, {\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrftoken\n        },\n        credentials: 'include'\n      }).then(response => {\n        if (response.ok) {\n          console.log(\"current_user ttt\", response);\n          return response.json();\n        } else {\n          console.log(response, 'Mauvaise réponse du réseau');\n        }\n      }).then(data => {\n        return data;\n      }).catch(function (error) {\n        console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\n      });\n      setU(data.user);\n    };\n\n    t();\n    return () => {};\n  }, [props.user]);\n  const [produit_json, setProduit] = useState(\"\");\n\n  let initNav = () => {\n    const lien = document.URL;\n    var produitId = lien.split('/')[lien.split('/').length - 1];\n    var url = \"http://localhost:8000/produit/\" + produitId;\n    fetch(url).then(response => {\n      if (response.ok) {\n        console.log(\"fetch\");\n        return response.json();\n      } else {\n        console.log(response, 'Mauvaise réponse du réseau');\n      }\n    }).then(data => {\n      let imgs = [];\n\n      if (!data.image1.includes('null')) {\n        imgs.push(data.image1);\n      }\n\n      if (!data.image2.includes('null')) {\n        imgs.push(data.image2);\n      }\n\n      if (!data.image3.includes('null')) {\n        imgs.push(data.image3);\n      }\n\n      if (!data.image4.includes('null')) {\n        imgs.push(data.image4);\n      }\n\n      if (!data.image5.includes('null')) {\n        imgs.push(data.image5);\n      }\n\n      if (!data.image6.includes('null')) {\n        imgs.push(data.image6);\n      }\n\n      console.log(imgs);\n      setProduitimages(imgs);\n      setProduitImage(imgs[0]);\n      $(\".produitBuyImageSmall\").addClass(\"imageSelectionne\");\n      setProduit(data);\n    }).catch(function (error) {\n      console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\n    });\n  };\n\n  const once = {\n    once: true\n  };\n  useEffect(() => {\n    document.getElementById(\"navTop\").addEventListener('loaded', initNav());\n    return () => {};\n  }, []);\n  /*const produit_json = {\r\n  const [produitImage, setProduitImage] = useState('')\r\n  const changeImage = (e, i) => {\r\n      $(\".produitBuyImageSmall\").removeClass(\"imageSelectionne\")\r\n      e.target.classList.add(\"imageSelectionne\")\r\n      setProduitImage(i)\r\n  }\r\n  const produitImages = produitimages.map(i =>\r\n      <li className=\"produitBuyImageInList bloc\" onClick={(e) => changeImage(e, i)}>\r\n          <div className=\"content\">\r\n              <img src={i} className=\"produitBuyImageSmall\" />\r\n          </div>\r\n      </li>)\r\n  /*const caracteristiques = produit_json.caracteristiques.map(c =>\r\n      <div className=\"caracteristique\">\r\n          <span className=\"caracteristiqueTitre\">\r\n              {c.nom}\r\n          </span>\r\n          <span className=\"caracteristiqueValeur\">\r\n              {c.valeur}\r\n          </span>\r\n      </div>\r\n  )*/\n\n  const caracteristiques = \"\";\n\n  const zoomImg = e => {\n    $(\".produitBuyImageShow\").addClass(\"td0\");\n    $(\".produitBuyImageShow\").on('mousemove', e => {\n      var X = -e.pageX + $(\".imgCont\").offset().left + 0.5 * $(\".imgCont\").width();\n      var Y = -e.pageY + $(\".imgCont\").offset().top + 0.5 * $(\".imgCont\").height();\n      $(\".produitBuyImageShow\").css(\"object-position\", `${X}px ${Y}px`);\n      console.log(X, Y);\n      console.log($(\".imgCont\").offset().left + $(\".imgCont\").width());\n    });\n  };\n\n  const leaveImg = e => {\n    $(\".produitBuyImageShow\").removeClass(\"td0\");\n    $(\".produitBuyImageShow\").css(\"object-position\", `center`);\n  };\n  /*const avis = produit_json.commentaires.map(a => <Avis note={a.note} titre={a.titre} date={a.date} user={a.user.username} contenu={a.contenu} />\r\n  )*/\n\n\n  const avis = \" Aucun avis a pour le moment été posté pour ce produit\";\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"w-100 main\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"produitBuy d-flex flex-column flex-lg-row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"produitBuyImageContainer w-100 \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-center align-items-center w-100\",\n            children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n              className: \"produitBuyImageList\",\n              children: produitImages\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"bloc\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"content border-start overflow-hidden imgCont\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: produitImage,\n                  className: \"produitBuyImageShow\",\n                  onMouseLeave: e => leaveImg(e),\n                  onMouseOver: e => zoomImg(e)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 228,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 227,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 226,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 222,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"d-flex justify-content-center align-items-center\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"produitBuyDetail\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: france,\n                alt: \"\",\n                className: \"detailImage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 234,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detailText\",\n                children: \"Stock en France\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 235,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 233,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"produitBuyDetail\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: expedition24,\n                alt: \"\",\n                className: \"detailImage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 240,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detailText\",\n                children: \"Exp\\xE9dition en 24H\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 241,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 239,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"produitBuyDetail\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: paiement,\n                alt: \"\",\n                className: \"detailImage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 246,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detailText\",\n                children: \"Paiement s\\xE9curis\\xE9\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 247,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 245,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"produitBuyDetail\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: sav,\n                alt: \"\",\n                className: \"detailImage\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"detailText\",\n                children: \"SAV disponible et r\\xE9actif\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 253,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 251,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 221,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"produitBuyDescription w-100\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"produitBuyBuy\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex flex-column w-100\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"produitBuyNom\",\n                children: produit_json.nom\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 262,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"produitBuyPrix\",\n                children: [produit_json.prix, \" \\u20AC\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 265,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 261,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"d-flex w-100 justify-content-end\",\n              children: [/*#__PURE__*/_jsxDEV(\"label\", {\n                htmlFor: \"\",\n                className: \"d-flex flex-column flex-md-row justify-content-center align-items-center\",\n                children: [\"Quantit\\xE9\", /*#__PURE__*/_jsxDEV(\"input\", {\n                  type: \"number\",\n                  className: \"ProduitBuyQte\",\n                  value: \"1\",\n                  placeholder: \"1\",\n                  id: \"tentacles\",\n                  name: \"tentacles\",\n                  min: \"1\",\n                  max: produit_json.max_quantite\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 272,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 270,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"produitBuyBtn\",\n                onClick: e => acheter(e),\n                children: \"Ajouter au panier\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 269,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"produitBuySousNom\",\n            children: produit_json.sousNom\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 280,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"produitBuyDescriptionCourte mt-2\",\n            children: produit_json.descriptionCourte\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"produitBuyAutreOption\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"produitBuyCaracteristiques\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"caracteristiquesTitre\",\n              children: \"Caracteristiques technique\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 290,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"caracteristiques\",\n              children: caracteristiques\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 293,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 289,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"produitBuyDescriptionLongue\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"caracteristiquesTitre\",\n              children: \"Description compl\\xE8te\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 298,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"descriptionLongue mt-2\",\n              children: produit_json.descriptionComplete\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 297,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"produitBuyCommentaire\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"caracteristiquesTitre\",\n          children: \"Une question sur le produit ?\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 308,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n          action: \"\",\n          className: \"d-flex w-100 commentPost\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"w-100 d-flex flex-column p-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n              name: \"\",\n              id: \"\",\n              cols: \"30\",\n              rows: \"2\",\n              className: \"commentInput mb-2\",\n              placeholder: \"R\\xE9diger une question concernant le produit\",\n              required: true\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"email\",\n              className: \"commentInput \",\n              placeholder: \"Entrer votre email\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"commentBtn m-2\",\n            children: \"Poser\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 316,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"commentaires\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"commentaire\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 307,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"produitBuyCommentaire\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"caracteristiquesTitre\",\n          children: \"Avis sur le produit\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"avisList\",\n          children: avis\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 327,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 218,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Produitachat, \"sBifoZIisTi4m3hZ1BHUKnl80GQ=\");\n\n_c = Produitachat;\nexport default Produitachat;\n\nvar _c;\n\n$RefreshReg$(_c, \"Produitachat\");","map":{"version":3,"sources":["C:/Users/Nourou/Documents/Developpement WEB/CamSecurite-django-react/frontend/src/pages/components/ProduitAchat.js"],"names":["React","useState","useEffect","Avis","$","expedition24","france","paiement","sav","Produitachat","props","produitimages","setProduitimages","u","setU","user","console","log","getCSRF","url2","r","fetch","credentials","then","response","ok","json","catch","error","message","acheter","e","preventDefault","btn","target","innerHTML","classList","add","l","document","createElement","setAttribute","b","appendChild","disabled","setTimeout","inputsForm","Object","String","id","JSON","stringify","method","headers","body","data","t","url","csrftoken","csrfToken","produit_json","setProduit","initNav","lien","URL","produitId","split","length","imgs","image1","includes","push","image2","image3","image4","image5","image6","setProduitImage","addClass","once","getElementById","addEventListener","caracteristiques","zoomImg","on","X","pageX","offset","left","width","Y","pageY","top","height","css","leaveImg","removeClass","avis","produitImages","produitImage","nom","prix","max_quantite","sousNom","descriptionCourte","descriptionComplete"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Avis from './Avis';\r\nimport $ from 'jquery';\r\nimport expedition24 from '../assets/img/expedition24.png'\r\nimport france from '../assets/img/france.png'\r\nimport paiement from '../assets/img/paiement.jpg'\r\nimport sav from '../assets/img/sav.png'\r\n\r\nconst Produitachat = (props) => {\r\n    const [produitimages, setProduitimages] = useState([\"\"])\r\n\r\n    const [u,setU] = useState(props.user)\r\n    console.log('u u 168161',u)\r\n  const getCSRF = async () => {\r\n    var url2 = \"http://localhost:8000/csrf/\"\r\n    let r = '' \r\n    await fetch(url2, {\r\n        credentials: 'include',\r\n      }).then(response => {\r\n        if(response.ok) {\r\n            console.log(\"fetchCSRF\")\r\n            r = response.json();\r\n        } else {\r\n            console.log(response,'Mauvaise réponse du réseau');\r\n        }\r\n        })\r\n        .catch(function(error) {\r\n        console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\r\n        });\r\n    return r\r\n}\r\n    console.log('props ppp produit',props)\r\n    const acheter = (e) => {\r\n        e.preventDefault();\r\n        let btn = e.target\r\n        btn.innerHTML=\"\"\r\n        btn.classList.add(\"btnLoading\")\r\n        var l = document.createElement('div') \r\n        l.setAttribute(\"class\",\"loader1\")\r\n        var b = document.createElement('div') \r\n        b.setAttribute(\"class\",\"box\")\r\n        b.appendChild(l)\r\n        console.log(b)\r\n        btn.appendChild(b);\r\n        btn.disabled=true\r\n        setTimeout(() => {\r\n            btn.innerHTML=\"\"\r\n            btn.classList.add(\"btnOK\")\r\n        },4000)\r\n        let inputsForm = new Object\r\n        inputsForm['quantite'] = '1'\r\n        inputsForm['iduser'] = String(u.id)\r\n        inputsForm['idproduit'] = String(props.id)\r\n        inputsForm = JSON.stringify(inputsForm);\r\n        console.log('ajoutpanier',inputsForm)\r\n        var url2 = \"http://localhost:8000/ajouter_produit/\"\r\n\r\n        fetch(url2,{\r\n            method: 'POST',\r\n            headers: {\r\n                'Accept': 'application/json',\r\n                'Content-Type': 'application/json',\r\n              }, \r\n              body: inputsForm\r\n          }).then(response => {\r\n        if(response.ok) {\r\n            console.log(\"fetchAddProduit\")\r\n            return response.json();\r\n        } else {\r\n            console.log(response,'Mauvaise réponse du réseau pas d ajout');\r\n        }\r\n        }).then(data => \r\n            {\r\n                console.log(data)\r\n            }\r\n            )\r\n        .catch(function(error) {\r\n        console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\r\n        });\r\n        setTimeout(() => {\r\n            btn.innerHTML=\"\"\r\n            btn.classList.add(\"btnOK\")\r\n        },2000)\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        let t = async () => {\r\n            var url = \"http://localhost:8000/current_user/?format=json\"\r\n            let r = await getCSRF()\r\n            const csrftoken = r.csrfToken\r\n            let data = await fetch(url,{                \r\n              headers: {\r\n              'Accept': 'application/json',\r\n              'Content-Type': 'application/json',\r\n              'X-CSRFToken': csrftoken\r\n            }, \r\n            credentials: 'include',\r\n            }).then(response => {\r\n            if(response.ok) {\r\n                console.log(\"current_user ttt\",response)\r\n                return response.json();\r\n            } else {\r\n                console.log(response,'Mauvaise réponse du réseau');\r\n            }\r\n            }).then(data => \r\n                {\r\n                  return(data)\r\n                }\r\n                )\r\n            .catch(function(error) {\r\n              console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\r\n            });\r\n            setU(data.user)\r\n          }\r\n            t()\r\n\r\n        return () => {\r\n        };\r\n    }, [props.user]);\r\n\r\n\r\n\r\n    const [produit_json, setProduit] = useState(\"\")\r\n    let initNav = () => {\r\n        const lien = document.URL\r\n        var produitId = lien.split('/')[lien.split('/').length-1]\r\n        var url = \"http://localhost:8000/produit/\"+produitId\r\n\r\n            fetch(url).then(response => {\r\n            if(response.ok) {\r\n                console.log(\"fetch\")\r\n                return response.json();\r\n            } else {\r\n                console.log(response,'Mauvaise réponse du réseau');\r\n            }\r\n            }).then(data =>{\r\n                let imgs = []\r\n                if(!data.image1.includes('null')){\r\n                    imgs.push(data.image1)\r\n                }\r\n                if(!data.image2.includes('null')){\r\n                    imgs.push(data.image2)\r\n                }\r\n                if(!data.image3.includes('null')){\r\n                    imgs.push(data.image3)\r\n                }\r\n                if(!data.image4.includes('null')){\r\n                    imgs.push(data.image4)\r\n                }\r\n                if(!data.image5.includes('null')){\r\n                    imgs.push(data.image5)\r\n                }\r\n                if(!data.image6.includes('null')){\r\n                    imgs.push(data.image6)\r\n                }\r\n                console.log(imgs)\r\n                setProduitimages(imgs)\r\n                setProduitImage(imgs[0])\r\n                $(\".produitBuyImageSmall\").addClass(\"imageSelectionne\")\r\n                setProduit(data)\r\n            })\r\n            .catch(function(error) {\r\n            console.log('Il y a eu un problème avec l\\'opération fetch: ' + error.message);\r\n            });\r\n                      \r\n    }\r\n    const once = {\r\n        once : true\r\n    };\r\n    useEffect(() => {\r\n        document.getElementById(\"navTop\").addEventListener('loaded',initNav())\r\n        return () => {\r\n        };\r\n    }, []);\r\n    /*const produit_json = {\r\n    const [produitImage, setProduitImage] = useState('')\r\n    const changeImage = (e, i) => {\r\n        $(\".produitBuyImageSmall\").removeClass(\"imageSelectionne\")\r\n        e.target.classList.add(\"imageSelectionne\")\r\n        setProduitImage(i)\r\n    }\r\n    const produitImages = produitimages.map(i =>\r\n        <li className=\"produitBuyImageInList bloc\" onClick={(e) => changeImage(e, i)}>\r\n            <div className=\"content\">\r\n                <img src={i} className=\"produitBuyImageSmall\" />\r\n            </div>\r\n        </li>)\r\n    /*const caracteristiques = produit_json.caracteristiques.map(c =>\r\n        <div className=\"caracteristique\">\r\n            <span className=\"caracteristiqueTitre\">\r\n                {c.nom}\r\n            </span>\r\n            <span className=\"caracteristiqueValeur\">\r\n                {c.valeur}\r\n            </span>\r\n        </div>\r\n    )*/\r\n    const caracteristiques =\"\"\r\n    const zoomImg = (e) => {   \r\n        $(\".produitBuyImageShow\").addClass(\"td0\")\r\n        $(\".produitBuyImageShow\").on('mousemove',(e)=>{\r\n              var X = -e.pageX + $(\".imgCont\").offset().left + 0.5*$(\".imgCont\").width();\r\n              var Y = -e.pageY + $(\".imgCont\").offset().top + 0.5*$(\".imgCont\").height();\r\n              $(\".produitBuyImageShow\").css(\"object-position\",`${X}px ${Y}px`)    \r\n              console.log(X,Y)\r\n              console.log($(\".imgCont\").offset().left + $(\".imgCont\").width())\r\n        })\r\n            };\r\n    const leaveImg = (e) => {\r\n        $(\".produitBuyImageShow\").removeClass(\"td0\")\r\n        $(\".produitBuyImageShow\").css(\"object-position\",`center`)\r\n    }\r\n    /*const avis = produit_json.commentaires.map(a => <Avis note={a.note} titre={a.titre} date={a.date} user={a.user.username} contenu={a.contenu} />\r\n    )*/\r\n    const avis =\" Aucun avis a pour le moment été posté pour ce produit\"\r\n    return (\r\n        <div className='w-100 main'>\r\n            <div>\r\n                <div className=\"produitBuy d-flex flex-column flex-lg-row\">\r\n                    <div className=\"produitBuyImageContainer w-100 \">\r\n                        <div className=\"d-flex justify-content-center align-items-center w-100\">\r\n                            <ul className=\"produitBuyImageList\">\r\n                                {produitImages}\r\n                            </ul>\r\n                            <div className=\"bloc\">\r\n                                <div className=\"content border-start overflow-hidden imgCont\">\r\n                                    <img src={produitImage} className=\"produitBuyImageShow\" onMouseLeave={(e) => leaveImg(e) } onMouseOver={(e) => zoomImg(e)} />\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"d-flex justify-content-center align-items-center\">\r\n                            <div className=\"produitBuyDetail\">\r\n                                <img src={france} alt=\"\" className=\"detailImage\" />\r\n                                <span className=\"detailText\">\r\n                                    Stock en France\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"produitBuyDetail\">\r\n                                <img src={expedition24} alt=\"\" className=\"detailImage\" />\r\n                                <span className=\"detailText\">\r\n                                    Expédition en 24H\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"produitBuyDetail\">\r\n                                <img src={paiement} alt=\"\" className=\"detailImage\" />\r\n                                <span className=\"detailText\">\r\n                                    Paiement sécurisé\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"produitBuyDetail\">\r\n                                <img src={sav} alt=\"\" className=\"detailImage\" />\r\n                                <span className=\"detailText\">\r\n                                    SAV disponible et réactif\r\n                                </span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"produitBuyDescription w-100\">\r\n                        <div className=\"produitBuyBuy\">\r\n                            <div className=\"d-flex flex-column w-100\">\r\n                                <span className=\"produitBuyNom\">\r\n                                    {produit_json.nom}\r\n                                </span>\r\n                                <span className=\"produitBuyPrix\">\r\n                                    {produit_json.prix} €\r\n                                </span>\r\n                            </div>\r\n                            <div className=\"d-flex w-100 justify-content-end\">\r\n                                <label htmlFor=\"\" className=\"d-flex flex-column flex-md-row justify-content-center align-items-center\">\r\n                                    Quantité\r\n                                    <input type=\"number\" className=\"ProduitBuyQte\" value=\"1\" placeholder=\"1\" id=\"tentacles\" name=\"tentacles\"\r\n                                        min=\"1\" max={produit_json.max_quantite} />\r\n                                </label>\r\n                                <button className=\"produitBuyBtn\" onClick={(e) => acheter(e)}>\r\n                                    Ajouter au panier\r\n                                </button>\r\n                            </div>\r\n                        </div>\r\n                        <span className=\"produitBuySousNom\">\r\n                            {produit_json.sousNom}\r\n                        </span>\r\n                        <p className=\"produitBuyDescriptionCourte mt-2\">\r\n                            {produit_json.descriptionCourte}\r\n                        </p>\r\n                        <div className=\"produitBuyAutreOption\">\r\n\r\n                        </div>\r\n                        <div className=\"produitBuyCaracteristiques\">\r\n                            <span className=\"caracteristiquesTitre\">\r\n                                Caracteristiques technique\r\n                            </span>\r\n                            <div className=\"caracteristiques\">\r\n                                {caracteristiques}\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"produitBuyDescriptionLongue\">\r\n                            <span className=\"caracteristiquesTitre\">\r\n                                Description complète\r\n                            </span>\r\n                            <div className=\"descriptionLongue mt-2\">\r\n                                {produit_json.descriptionComplete}\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n                <div className=\"produitBuyCommentaire\">\r\n                    <span className=\"caracteristiquesTitre\">\r\n                        Une question sur le produit ?\r\n                    </span>\r\n                    <form action=\"\" className=\"d-flex w-100 commentPost\">\r\n                        <div className=\"w-100 d-flex flex-column p-2\">\r\n                            <textarea name=\"\" id=\"\" cols=\"30\" rows=\"2\" className=\"commentInput mb-2\" placeholder=\"Rédiger une question concernant le produit\" required></textarea>\r\n                            <input type=\"email\" className=\"commentInput \" placeholder=\"Entrer votre email\" />\r\n                        </div>\r\n                        <button className=\"commentBtn m-2\">\r\n                            Poser\r\n                        </button>\r\n                    </form>\r\n                    <div className=\"commentaires\">\r\n                        <div className=\"commentaire\">\r\n\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div className=\"produitBuyCommentaire\">\r\n                    <span className=\"caracteristiquesTitre\">\r\n                        Avis sur le produit\r\n                    </span>\r\n                    <div className=\"avisList\">\r\n                        {avis}\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Produitachat;\r\n"]},"metadata":{},"sourceType":"module"}